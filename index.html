<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–û—Ü–µ–Ω–∫–∞ –ø–ª–∞—Ç–µ–∂–µ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏</title>
<style>
body { font-family: Arial; background:#f5f5f5; padding:20px }
.box { background:#fff; padding:20px; max-width:650px; margin:auto; border-radius:10px }
label { display:block; margin-top:10px }
input { width:100%; padding:8px; margin-top:5px }
button { margin-top:15px; padding:10px; width:100%; font-size:16px }
.result { margin-top:15px; padding:15px; border-radius:5px }
.ok { background:#e6ffed; border-left:5px solid green }
.warn { background:#fffbe6; border-left:5px solid orange }
.bad { background:#ffe6e6; border-left:5px solid red }
.history { margin-top:20px }
.item { border-bottom:1px solid #ddd; padding:10px 0 }
</style>
</head>

<body>
<div class="box">
<h2>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø–ª–∞—Ç–µ–∂–µ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏</h2>

<label>–î–æ—Ö–æ–¥ –∫–ª–∏–µ–Ω—Ç–∞ (‚Ç∏)</label>
<input type="text" id="income" value="500000">

<label>–û–±—â–∏–π –¥–æ–ª–≥ –∫–ª–∏–µ–Ω—Ç–∞ (‚Ç∏)</label>
<input type="text" id="totalDebt" value="12000000">

<label>–¢–µ–∫—É—â–∏–π –µ–∂–µ–º–µ—Å—è—á–Ω—ã–π –ø–ª–∞—Ç–µ–∂ –ø–æ –∫—Ä–µ–¥–∏—Ç–∞–º (‚Ç∏)</label>
<input type="text" id="monthlyPayment" value="250000">

<label>–ö–æ–º. —É—Å–ª—É–≥–∏, –∞—Ä–µ–Ω–¥–∞, –¥–æ–ø. —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ —Å–µ–º—å—é (‚Ç∏)</label>
<input type="text" id="familyExpenses" value="200000">

<label>–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ–∂–∏—Ç–æ—á–Ω—ã–π –º–∏–Ω–∏–º—É–º (—á–µ–ª √ó 45 000)</label>
<input type="text" id="familyMembers" value="2">

<button onclick="calculate()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>

<div id="result"></div>
<div class="history" id="history"></div>
</div>

<script>
// —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
function format(el){
 let v = el.value.replace(/\D/g,'');
 el.value = v.replace(/\B(?=(\d{3})+(?!\d))/g," ");
}
document.querySelectorAll('input').forEach(i=>{
 i.addEventListener('input',()=>format(i));
});

function num(v){ return parseInt(v.replace(/\s/g,''))||0 }

function calculate(){
 const income = num(incomeEl.value);
 const debt = num(totalDebt.value);
 const pay = num(monthlyPayment.value);
 const expenses = num(familyExpenses.value);
 const members = num(familyMembers.value)*45000;

 const freeMoney = income - pay - expenses - members;
 let text='', cls='';

 // üî¥ –ø–æ—á—Ç–∏ –≤–µ—Å—å –¥–æ—Ö–æ–¥ —É—Ö–æ–¥–∏—Ç –Ω–∞ –ø–ª–∞—Ç—ë–∂
 if (Math.abs(income - pay) <= 100000){
   text = '‚ùå –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç: –µ–∂–µ–º–µ—Å—è—á–Ω—ã–π –ø–ª–∞—Ç—ë–∂ –ø–æ—á—Ç–∏ —Ä–∞–≤–µ–Ω –¥–æ—Ö–æ–¥—É';
   cls = 'bad';
 }
 // üü® –ø–æ–¥—Ö–æ–¥–∏—Ç –Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
 else if (pay > income*0.6 && debt <= 8000000){
   text = '‚ö†Ô∏è –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–µ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏';
   cls = 'warn';
 }
 // üü© –ø–ª–∞—Ç—ë–∂ –∞–¥–µ–∫–≤–∞—Ç–Ω—ã–π
 else if (freeMoney >= 50000){
   text = '‚úÖ –ü–ª–∞—Ç–µ–∂–µ—Å–ø–æ—Å–æ–±–µ–Ω, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è';
   cls = 'ok';
 }
 else{
   text = '‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –∂–∏–∑–Ω—å';
   cls = 'bad';
 }

 result.innerHTML = `<div class="result ${cls}">${text}<br>–û—Å—Ç–∞—Ç–æ–∫: ${freeMoney.toLocaleString()} ‚Ç∏</div>`;

 history.innerHTML = `
 <div class="item">
 –î–æ—Ö–æ–¥: ${income.toLocaleString()} ‚Ç∏<br>
 –î–æ–ª–≥: ${debt.toLocaleString()} ‚Ç∏<br>
 –ü–ª–∞—Ç—ë–∂: ${pay.toLocaleString()} ‚Ç∏<br>
 –ò—Ç–æ–≥: ${text}
 </div>` + history.innerHTML;
}

const incomeEl = document.getElementById('income');
</script>
</body>
</html>
